<% if flash[:notice] %>
<div class="alert alert-success alert-dismissible" role="alert">
  <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
  <strong>Success!</strong> <%= flash[:notice] %>
</div>
<% end %>
<% if flash[:info] %>
<div class="alert alert-info alert-dismissible" role="alert">
  <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
  <%= flash[:info] %>
</div>
<% end %>

<h1>My Upcoming Bookings</h1>
<table class="table table-striped">
<% for booking in @upcoming do %>
<tr>
  <td><%= Time.parse(booking["FromTime"]).to_s(:long) %> - <%= Time.parse(booking["ToTime"]).localtime.to_s(:time) %></td>
  <td><%= link_to('<span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Edit</a>'.html_safe, edit_booking_path(booking["Id"]), :class => "btn btn-default btn-sm") %></td>
  <td><%= link_to('<span class="glyphicon glyphicon-remove" aria-hidden="true"></span> Remove</a>'.html_safe, booking_path(booking["Id"]), :method => :delete, :data => {:confirm => "Are you sure you want to cancel this booking for #{Date.parse(booking['FromTime'])}?"}, :class => "btn btn-default btn-sm") %></td>
</tr>
<% end %>
</table>

<h2>
  My Past Bookings 
  <small class="glyphicon glyphicon-plus" data-toggle="collapse" data-target="#demo"></small> 
</h2>
 
<div id="demo" class="collapse in">
  <table class="table table-striped">
  <% for booking in @past do %>
  <tr>
    <td><%= Time.parse(booking["FromTime"]).to_s(:long) %> - <%= Time.parse(booking["ToTime"]).localtime.to_s(:time) %></td>
    <td><%= link_to('<span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Edit</a>'.html_safe, edit_booking_path(booking["Id"]), :class => "btn btn-default btn-sm") %></td>
    <td><%= link_to('<span class="glyphicon glyphicon-remove" aria-hidden="true"></span> Remove</a>'.html_safe, booking_path(booking["Id"]), :method => :delete, :data => {:confirm => "Are you sure you want to cancel this booking for #{Date.parse(booking['FromTime'])}?"}, :class => "btn btn-default btn-sm") %></td>
  </tr>
  <% end %>
  </table>
</div>